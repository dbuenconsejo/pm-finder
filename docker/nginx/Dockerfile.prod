FROM nginx:1.27-alpine

# Remove default config
RUN rm /etc/nginx/conf.d/default.conf

# Copy custom nginx config
COPY nginx-k8s.conf /etc/nginx/conf.d/default.conf

# Copy public assets from the app (built in CI/CD or multi-stage)
# This will be overridden by the shared volume in the K8s pod

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
